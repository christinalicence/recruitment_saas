{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{{ profile.display_name }}{% endblock %}</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'cms/css/tenant_themes.css' %}">
    
    {% if profile %}
    <link rel="stylesheet" href="{% static 'cms/css/color-overrides.css' %}?primary={{ profile.primary_color|urlencode }}&secondary={{ profile.secondary_color|urlencode }}&bg={{ profile.background_color|urlencode }}&template={{ profile.template_choice }}">
    {% endif %}
</head>
<body class="theme-{{ profile.template_choice|default:'executive' }} agency-site" data-primary-color="{{ profile.primary_color }}" data-secondary-color="{{ profile.secondary_color }}" data-bg-color="{{ profile.background_color }}">
    
    <div class="top-stripe"></div>

    <nav class="navbar navbar-expand-lg navbar-light bg-white border-bottom sticky-top">
        <div class="container">
            <a class="navbar-brand fw-bold d-flex align-items-center" href="{% url 'cms:home' %}">
                {% if profile.logo %}
                    <img src="{{ profile.logo.url }}" alt="{{ profile.display_name }} logo" class="navbar-logo me-2">
                {% endif %}
                <span class="navbar-brand-text">{{ profile.company_name|default:profile.display_name }}</span>
            </a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="mainNav">
                <div class="navbar-nav ms-auto">
                    <a class="nav-link px-3" href="{% url 'cms:home' %}">Home</a>
                    <a class="nav-link px-3" href="{% url 'cms:job_list' %}">Jobs</a>
                    <a class="nav-link px-3" href="{% url 'cms:about' %}">About Us</a>
                </div>
            </div>
        </div>
    </nav>

    <main>
        {% block content %}{% endblock %}
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
    // Inject colors into CSS variables dynamically
    (function() {
        const root = document.documentElement;
        const primary = document.body.dataset.primaryColor;
        const secondary = document.body.dataset.secondaryColor;
        const bg = document.body.dataset.bgColor;
        
        if (primary) root.style.setProperty('--brand-primary', primary);
        if (secondary) root.style.setProperty('--brand-secondary', secondary);
        if (bg) root.style.setProperty('--brand-bg', bg);
    })();
    </script>
</body>
</html>